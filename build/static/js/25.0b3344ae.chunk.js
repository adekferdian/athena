(this.webpackJsonpebiz=this.webpackJsonpebiz||[]).push([[25],{423:function(e,a,s){"use strict";s(2);var t=s(3),l=s(0);a.a=function(e){var a=e.message,s=e.handleClose;return a?Object(l.jsxs)("div",{className:"alert_success position-absolute",role:"alert",style:{left:0,top:0,right:0,zIndex:2},children:[Object(l.jsxs)("div",{className:"d-flex align-items-center",children:[Object(l.jsx)("div",{className:"btn btn-icon btn-sm btn-transparent",children:Object(l.jsx)(t.a,{className:"svg-icon-2",path:"/media/icons/efood/ButtonSuccess.svg"})}),Object(l.jsx)("p",{children:a})]}),Object(l.jsx)("div",{className:"btn btn-icon btn-sm btn-transparent",onClick:s,children:Object(l.jsx)(t.a,{className:"svg-icon-2",path:"/media/icons/efood/ButtonClose.svg"})})]}):null}},427:function(e,a,s){"use strict";s(2);var t=s(28),l=s(3),i=s(0);a.a=function(e){var a=e.message,s=e.handleClose;return a?Object(i.jsxs)("div",{className:"alert_error position-absolute",role:"alert",style:{left:0,top:0,right:0,zIndex:2},children:[Object(i.jsxs)("div",{className:"d-flex align-items-center",children:[Object(i.jsx)(t.a,{src:"/media/icons/efood/IconWarning.svg",style:{marginRight:16}}),Object(i.jsx)("p",{children:a})]}),Object(i.jsx)("div",{className:"btn btn-icon btn-sm btn-transparent",onClick:s,children:Object(i.jsx)(l.a,{className:"svg-icon-2",path:"/media/icons/efood/ButtonClose.svg"})})]}):null}},490:function(e,a,s){"use strict";s.r(a);var t=s(2),l=s(26),i=s(10),n=s(29),c=s(84),o=s(34),r=s(22),d=s(56),b=s(154),m=s(106),j=s(0),u=n.c().shape({oldPassword:n.e().min(6,"Password minimal 6 karakter").required("Kolom wajib diisi"),newPassword:n.e().min(6,"Password minimal 6 karakter").required("Kolom wajib diisi"),rePassword:n.e().min(6,"Password minimal 6 karakter").required("Kolom wajib diisi").test("equal","Konfirmasi Password Baru harus sama dengan Password Baru.",(function(e){var a=n.d("newPassword");return e===this.resolve(a)}))}),f={oldPassword:"",newPassword:"",rePassword:""},h=function(){return Object(j.jsx)(o.d,{description:"Ubah Password",children:"Ubah Password"})},O=function(){var e=Object(l.g)(),a=Object(b.c)().addPageToasts,s=Object(r.e)({initialValues:f,validateOnBlur:!1,validateOnChange:!1,validationSchema:u,onSubmit:function(e,s){var t=s.setStatus,l=s.setSubmitting,i=s.setFieldValue,n=s.setFieldError;Object(d.j)(e.oldPassword,e.newPassword).then((function(){i("oldPassword",""),i("newPassword",""),i("rePassword",""),a({text:"Password berhasil diubah.",scheme:"info"}),l(!1)})).catch((function(){n("oldPassword","Password Saat Ini salah. Coba lagi."),l(!1),t("")}))}});return Object(t.useEffect)((function(){document.title=Object(c.a)("Ubah Password")}),[]),Object(j.jsxs)("div",{className:"position-relative",children:[Object(j.jsx)(h,{}),Object(j.jsx)("div",{className:"card",children:Object(j.jsx)("div",{className:"card-body",children:Object(j.jsxs)("form",{onSubmit:s.handleSubmit,className:"col-md-6",children:[Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)(m.a,Object(i.a)(Object(i.a)({label:"Password Saat Ini",placeholder:""},s.getFieldProps("oldPassword")),{},{name:"oldPassword",autoComplete:"off"})),s.touched.oldPassword&&s.errors.oldPassword&&Object(j.jsx)("div",{className:"fv-plugins-message-container text-danger",children:Object(j.jsx)("span",{role:"alert",children:s.errors.oldPassword})})]}),Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)(m.a,Object(i.a)(Object(i.a)({label:"Password Baru"},s.getFieldProps("newPassword")),{},{name:"newPassword",autoComplete:"off"})),Object(j.jsx)("div",{className:"fv-plugins-message-container text-muted",children:Object(j.jsx)("span",{role:"alert",children:"Password minimal 6 karakter."})}),s.touched.newPassword&&s.errors.newPassword&&Object(j.jsx)("div",{className:"fv-plugins-message-container text-danger",children:Object(j.jsx)("span",{role:"alert",children:s.errors.newPassword})})]}),Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)(m.a,Object(i.a)(Object(i.a)({label:"Konfirmasi (Ulangi) Password Baru"},s.getFieldProps("rePassword")),{},{name:"rePassword",autoComplete:"off"})),s.touched.rePassword&&s.errors.rePassword&&Object(j.jsx)("div",{className:"fv-plugins-message-container text-danger",children:Object(j.jsx)("span",{role:"alert",children:s.errors.rePassword})})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{type:"button",className:"btn btn-lg btn-light fw-bolder me-4",style:{flex:1},disabled:s.isSubmitting,onClick:function(){return e.goBack()},children:"Kembali"}),Object(j.jsxs)("button",{type:"submit",className:"btn btn-lg btn-secondary fw-bolder",style:{flex:1},disabled:s.isSubmitting,children:[Object(j.jsx)("span",{className:"indicator-label",children:"Simpan"}),s.isSubmitting&&Object(j.jsxs)("span",{className:"indicator-progress",children:["Mohon Tunggu...",Object(j.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})})})]})},v=s(11),x=s(15),g=s(39),p=s(43),w=s(417),N=s(3),P={email:""},S=n.c().shape({email:n.e().email("Format email salah").required("Kolom wajib diisi")}),y={otp:""},k=n.c().shape({otp:n.e().min(4,"Kolom wajib diisi").max(4,"Kolom wajib diisi").required("Kolom wajib diisi")}),C=function(e){var a=e.onSuccess,s=e.onProcessing,t=e.onBack,l=Object(g.e)((function(e){var a;return null===(a=e.auth.user)||void 0===a?void 0:a.email}),g.c),n=Object(r.e)({initialValues:P,validateOnBlur:!1,validateOnChange:!1,validationSchema:S,onSubmit:function(e,t){var l=t.setStatus,i=t.setSubmitting,n=t.setErrors;s(!0),Object(d.h)(e.email).then((function(){s(!1),i(!1),a(e.email)})).catch((function(e){var a,t,c,o,r,d,b,m;s(!1),i(!1),l(null===e||void 0===e||null===(a=e.response)||void 0===a||null===(t=a.data)||void 0===t||null===(c=t.message[0])||void 0===c||null===(o=c.constraint[0])||void 0===o?void 0:o.message),n({email:null===e||void 0===e||null===(r=e.response)||void 0===r||null===(d=r.data)||void 0===d||null===(b=d.message[0])||void 0===b||null===(m=b.constraint[0])||void 0===m?void 0:m.message})}))}});return Object(j.jsxs)("form",{onSubmit:n.handleSubmit,children:[Object(j.jsxs)("div",{className:"modal-body",children:[Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Email saat ini"}),Object(j.jsx)("input",{placeholder:"",value:null!==l&&void 0!==l?l:"",className:Object(x.a)("form-control form-control-lg"),type:"text",disabled:!0,autoComplete:"off"})]}),Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Email Baru*"}),Object(j.jsx)("input",Object(i.a)(Object(i.a)({placeholder:""},n.getFieldProps("email")),{},{className:Object(x.a)("form-control form-control-lg form-control-solid text-gray-900",{"is-invalid":n.status||n.touched.email&&n.errors.email}),type:"email",name:"email",autoComplete:"off"})),n.touched.email&&n.errors.email&&Object(j.jsx)("div",{className:"fv-plugins-message-container text-danger",children:Object(j.jsx)("span",{role:"alert",children:n.errors.email})})]})]}),Object(j.jsxs)("div",{className:"modal-footer",children:[Object(j.jsx)("button",{type:"button",className:"btn btn-lg btn-light fw-bolder me-4",disabled:n.isSubmitting,onClick:t,children:"Kembali"})," ",Object(j.jsxs)("button",{type:"submit",className:"btn btn-lg btn-secondary fw-bolder",disabled:n.isSubmitting,children:[Object(j.jsx)("span",{className:"indicator-label",children:"Ubah Email"}),n.isSubmitting&&Object(j.jsxs)("span",{className:"indicator-progress",children:["Mohon Tunggu...",Object(j.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})},B=function(e){var a=e.email,s=e.onSuccess,t=e.onProcessing,l=e.onBack,i=Object(g.d)(),n=Object(r.e)({initialValues:y,validateOnBlur:!1,validateOnChange:!1,validationSchema:k,onSubmit:function(e,l){var n=l.setStatus,c=l.setSubmitting;t(!0),Object(d.i)(a,e.otp).then((function(e){var a=e.data;t(!1),c(!1),i(p.a.actions.setUser(a.data)),s()})).catch((function(){t(!1),c(!1),n("error")}))}});return Object(j.jsxs)("form",{onSubmit:n.handleSubmit,children:[Object(j.jsx)("div",{className:"modal-body",children:Object(j.jsx)("div",{className:"mb-10",children:"Kami telah mengirim link verifikasi ke email baru Anda. Silahkan cek email dan klik link untuk melakukan verifikasi ubah email."})}),Object(j.jsx)("div",{className:"modal-footer",children:Object(j.jsx)("button",{type:"button",className:"btn btn-lg btn-secondary fw-bolder",onClick:function(){l(),s()},children:"Okay"})})]})},K=function(e){var a=e.show,s=e.handleClose,l=e.handleSuccess,i=Object(t.useState)(),n=Object(v.a)(i,2),c=n[0],o=n[1],r=Object(t.useState)(!1),d=Object(v.a)(r,2),b=d[0],m=d[1],u=Object(t.useCallback)((function(){b||s()}),[b]);return Object(t.useEffect)((function(){a&&o(void 0)}),[a]),Object(j.jsxs)(w.a,{"aria-hidden":"true",tabIndex:"-1",show:a,onHide:u,centered:!0,children:[Object(j.jsxs)("div",{className:"modal-header d-flex align-items-center justify-content-between",children:[Object(j.jsx)("h3",{className:"d-flex align-items-center",children:c?"Verifikasi Ubah Data":"Ubah Email"}),Object(j.jsx)("div",{className:"btn btn-icon btn-sm btn-active-light-primary ms-2",onClick:u,children:Object(j.jsx)(N.a,{path:"/media/icons/duotune/arrows/arr061.svg",className:"svg-icon-2"})})]}),c?Object(j.jsx)(B,{email:c,onSuccess:function(){u(),l()},onProcessing:m,onBack:function(){return o(void 0)}}):Object(j.jsx)(C,{onSuccess:function(e){o(e),l()},onProcessing:m,onBack:u})]})},E=s(213),U=s(423),_=s(427),q=s(69),F=n.c().shape({name:n.e().required("Kolom wajib diisi")}),I={name:""},V=function(){return Object(j.jsx)(o.d,{description:"Profil Saya",children:"Profil Saya"})},T=function(){var e,a,s,n,o,m=Object(l.g)(),u=Object(g.e)((function(e){return e.auth.user}),g.c),f=Object(t.useState)(!1),h=Object(v.a)(f,2),O=h[0],w=h[1],N=Object(t.useState)(!1),P=Object(v.a)(N,2),S=P[0],y=P[1],k=Object(t.useState)(""),C=Object(v.a)(k,2),B=C[0],T=C[1],z=Object(t.useState)(""),A=Object(v.a)(z,2),H=A[0],R=A[1],D=Object(b.c)().addPageToasts,M=Object(g.e)((function(e){return e.auth.fetchingUser}),g.c),J=Object(t.useState)(),L=Object(v.a)(J,2),W=L[0],G=L[1],Q=Object(g.d)(),X=Object(r.e)({initialValues:I,validateOnBlur:!1,validateOnChange:!1,validationSchema:F,onSubmit:function(e,a){var s=a.setStatus,t=a.setSubmitting;Object(d.k)({name:e.name}).then((function(){D({text:"Data berhasil diubah.",scheme:"info"}),Q(p.a.actions.requestUser()),t(!1)})).catch((function(){t(!1),s("")}))}});Object(t.useEffect)((function(){document.title=Object(c.a)("Profil Saya")}),[]),Object(t.useEffect)((function(){Q(p.a.actions.requestUser())}),[Q]),Object(t.useEffect)((function(){void 0===W&&"loading"===M?G(!1):!1===W&&"loading"!==M&&(G(!0),"success"===M&&X.setFieldValue("name",null===u||void 0===u?void 0:u.name))}),[M,X,W,u]);return Object(j.jsxs)("div",{className:"position-relative",children:[Object(j.jsx)(U.a,{message:B,handleClose:function(){return T("")}}),Object(j.jsx)(_.a,{message:H,handleClose:function(){return R("")}}),Object(j.jsx)(V,{}),Object(j.jsx)("div",{className:"card",children:Object(j.jsxs)("div",{className:"card-body",children:[Object(j.jsx)("div",{className:W?"d-none":"",children:"Loading..."}),Object(j.jsx)("div",{className:W&&"failed"===M?"":"d-none",children:"Error, try to refresh the page"}),Object(j.jsxs)("form",{className:W&&"failed"!==M?"col-md-6":"d-none",onSubmit:X.handleSubmit,children:[Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Nama"}),Object(j.jsx)("input",Object(i.a)(Object(i.a)({placeholder:""},X.getFieldProps("name")),{},{className:Object(x.a)("form-control form-control-lg form-control-solid",{"is-invalid":X.status||X.touched.name&&X.errors.name}),type:"text",name:"name",autoComplete:"off"})),X.touched.name&&X.errors.name&&Object(j.jsx)("div",{className:"fv-plugins-message-container text-danger",children:Object(j.jsx)("span",{role:"alert",children:X.errors.name})})]}),Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"No. HP"}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsx)("div",{className:"col-9 col-md-9 col-lg-9",children:Object(j.jsx)(E.a,{placeholder:"",containerClass:"flex-fill",className:"form-control form-control-solid form-control-lg",type:"text",name:"phone",autoComplete:"off",value:null!==(e=null===u||void 0===u?void 0:u.phone)&&void 0!==e?e:"",onChangeValue:function(){},disabled:!0})}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{type:"button",className:"btn btn-lg btn-info fw-bolder",disabled:X.isSubmitting,onClick:function(){},children:"Ubah"})})]})]}),Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Email"}),Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-9 ".concat(null!==u&&void 0!==u&&u.email&&null===(null===u||void 0===u?void 0:u.email_verified_at)?"col-md-6 col-lg-6":"col-md-9 col-lg-9"),children:[Object(j.jsx)("input",{placeholder:"",value:null!==(a=null===u||void 0===u?void 0:u.email)&&void 0!==a?a:"",className:Object(x.a)("form-control form-control-solid form-control-lg flex-fill",{"is-invalid":(null===u||void 0===u?void 0:u.email)&&null===(null===u||void 0===u?void 0:u.email_verified_at)}),style:{borderColor:"#e4e6ef"},type:"text",disabled:!0,autoComplete:"off"}),(null===u||void 0===u?void 0:u.email)&&null===(null===u||void 0===u?void 0:u.email_verified_at)&&Object(j.jsx)("div",{className:"fv-plugins-message-container text-danger mt-1",children:Object(j.jsx)("span",{role:"alert",children:"Email belum diverifikasi"})})]}),Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("button",{type:"button",className:"btn btn-lg btn-info fw-bolder",disabled:S,onClick:function(){null!==u&&void 0!==u&&u.email&&null===(null===u||void 0===u?void 0:u.email_verified_at)?null!==u&&void 0!==u&&u.email&&(y(!0),Object(d.d)(null===u||void 0===u?void 0:u.email).finally((function(){return y(!1)})).then((function(e){T("Berhasil mengirim ulang email verifikasi")})).catch((function(e){R(Object(q.a)(e,!0,"Gagal mengirim ulang email verifikasi"))}))):w(!0)},children:null!==u&&void 0!==u&&u.email&&null===(null===u||void 0===u?void 0:u.email_verified_at)?"Kirim ulang verifikasi":"Ubah"})})]})]}),Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Nomor Induk Karyawan (NIK)"}),Object(j.jsx)("input",{placeholder:"",value:null!==(s=null===u||void 0===u?void 0:u.nip)&&void 0!==s?s:"",className:Object(x.a)("form-control form-control-solid form-control-lg"),type:"text",disabled:!0,autoComplete:"off"})]}),Object(j.jsxs)("div",{className:"fv-row mb-10",children:[Object(j.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Role"}),Object(j.jsx)("input",{placeholder:"",value:null!==(n=null===u||void 0===u||null===(o=u.role)||void 0===o?void 0:o.name)&&void 0!==n?n:"",className:Object(x.a)("form-control form-control-solid form-control-lg"),type:"text",disabled:!0,autoComplete:"off"})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{type:"button",className:"btn btn-lg btn-light fw-bolder me-4",disabled:X.isSubmitting,onClick:function(){return m.goBack()},children:"Kembali"})," ",Object(j.jsxs)("button",{type:"submit",className:"btn btn-lg btn-secondary fw-bolder",disabled:X.isSubmitting,children:[Object(j.jsx)("span",{className:"indicator-label",children:"Simpan Perubahan"}),X.isSubmitting&&Object(j.jsxs)("span",{className:"indicator-progress",children:["Mohon Tunggu...",Object(j.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})]})}),Object(j.jsx)(K,{show:O,handleClose:function(){return w(!1)},handleSuccess:function(){Q(p.a.actions.requestUser())}})]})},z=s(168);a.default=function(){return Object(j.jsxs)(l.d,{children:[Object(j.jsx)(l.b,{path:z.a.PASSWORD.PATH,component:O}),Object(j.jsx)(l.b,{path:z.a.PROFILE.PATH,component:T})]})}}}]);
//# sourceMappingURL=25.0b3344ae.chunk.js.map