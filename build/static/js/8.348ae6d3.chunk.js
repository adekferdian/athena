(this.webpackJsonpebiz=this.webpackJsonpebiz||[]).push([[8],{421:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var s=n(10),c=n(176),a=n(15),i=(n(2),n(433)),l=n(0),o=["children","isFocused","isDisabled"],r={Control:function(e){var t=e.children,n=e.isFocused,r=e.isDisabled,d=Object(c.a)(e,o);return Object(l.jsx)(i.l.Control,Object(s.a)(Object(s.a)({className:Object(a.a)("form-control border-0 form-control-lg-select form-control-solid",{focus:n,disabled:r}),isFocused:!0,isDisabled:!0},d),{},{children:t}))},IndicatorSeparator:function(){return null}}},425:function(e,t,n){"use strict";var s=n(2),c=n(28),a=n(0);t.a=function(e){var t=e.loading,n=e.limit,i=e.setPerPage,l=e.page,o=e.setPage,r=e.maxData,d=Object(s.useMemo)((function(){return Math.ceil(r/n)}),[r,n]),u=Object(s.useMemo)((function(){var e=[];if(0===d)return e;var t=Math.min(d,Math.max(0,l));if(d<8)for(var n=1;n<=d;n++)e.push(n);else t>4?e.push(1,void 0,Math.min(t,d-3)-1):e.push(1,2,3,4),t+3<d?(t>4&&e.push(t),e.push(Math.max(t,4)+1,void 0,d)):e.push(d-3,d-2,d-1,d);return e}),[d,l]);return Object(a.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(a.jsxs)("div",{className:"mb-4 w-md-auto w-100 d-flex align-items-center",children:[Object(a.jsxs)("div",{className:"position-relative",children:[Object(a.jsx)(c.a,{src:"/media/icons/efood/IconChevronDown.svg",className:"position-absolute translate-middle-y top-50 me-4 end-0 pe-none"}),Object(a.jsxs)("select",{className:"form-control form-control-sm form-control-solid pe-13",autoComplete:"off",value:n,onChange:function(e){return i(Number(e.currentTarget.value))},children:[Object(a.jsx)("option",{children:"10"}),Object(a.jsx)("option",{children:"20"}),Object(a.jsx)("option",{children:"50"}),Object(a.jsx)("option",{children:"100"})]})]}),t||0===r?null:Object(a.jsxs)("span",{className:"ms-5 flex-shrink-0",children:["Menampilkan ",(l-1)*n+1,"-",Math.min(r,(l-1)*n+n)," ","dari ",r," entri"]})]}),u.length>0?Object(a.jsxs)("ul",{className:"pagination flex-nowrap flex-fill justify-content-md-end",children:[Object(a.jsx)("li",{className:"page-item previous ".concat(1===l?"disabled":""),children:Object(a.jsx)("button",{onClick:function(){return o(l-1)},className:"page-link",children:Object(a.jsx)("i",{className:"previous"})})}),u.map((function(e,t){return void 0===e?Object(a.jsx)("li",{className:"page-item disabled",children:Object(a.jsx)("button",{className:"page-link",children:"..."})},"".concat(t,"-dot")):Object(a.jsx)("li",{className:"page-item ".concat(l===e?"active":""),children:Object(a.jsx)("button",{onClick:function(){return o(e)},className:"page-link",children:e})},e)})),Object(a.jsx)("li",{className:"page-item next ".concat(l===d?"disabled":""),children:Object(a.jsx)("button",{onClick:function(){return o(l+1)},className:"page-link",children:Object(a.jsx)("i",{className:"next"})})})]}):null]})}},427:function(e,t,n){"use strict";n(2);var s=n(28),c=n(3),a=n(0);t.a=function(e){var t=e.message,n=e.handleClose;return t?Object(a.jsxs)("div",{className:"alert_error position-absolute",role:"alert",style:{left:0,top:0,right:0,zIndex:2},children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(s.a,{src:"/media/icons/efood/IconWarning.svg",style:{marginRight:16}}),Object(a.jsx)("p",{children:t})]}),Object(a.jsx)("div",{className:"btn btn-icon btn-sm btn-transparent",onClick:n,children:Object(a.jsx)(c.a,{className:"svg-icon-2",path:"/media/icons/efood/ButtonClose.svg"})})]}):null}},428:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n(2),c=n(39);function a(e){var t=Object(c.e)((function(e){var t;return null!==(t=e.auth.permissions)&&void 0!==t?t:{}}),c.c),n=Object(s.useCallback)((function(n){var s,c,a=null!==(s=null===n||void 0===n?void 0:n.code)&&void 0!==s?s:null===e||void 0===e?void 0:e.code;return!a||Boolean(null===(c=t[a])||void 0===c?void 0:c.find((function(t){var s,c;return t===(null!==(s=null!==(c=null===n||void 0===n?void 0:n.access)&&void 0!==c?c:null===e||void 0===e?void 0:e.access)&&void 0!==s?s:"read")})))}),[null===e||void 0===e?void 0:e.access,null===e||void 0===e?void 0:e.code,t]),a=Object(s.useMemo)((function(){return n()}),[n]);return{hasAccess:n,canAccessPage:a}}},431:function(e,t,n){"use strict";var s=n(11),c=n(2);t.a=function(e,t){var n=Object(c.useState)(e),a=Object(s.a)(n,2),i=a[0],l=a[1];return Object(c.useEffect)((function(){var n=setTimeout((function(){l(e)}),t);return function(){clearTimeout(n)}}),[e,t]),i}},473:function(e,t,n){"use strict";n.r(t);var s,c,a=n(2),i=n(26),l=n(10),o=n(19),r=n(30),d=n(78),u=n(11),m=n(22),b=n(29),j=n(27),h=n.n(j),v="api/v1/admins/roles",f="api/v1/auth/special-roles";function p(e,t){return h.a.get(v,{params:Object(l.a)({},e),cancelToken:t})}function O(e,t){return h.a.get("".concat(v,"/").concat(e),{cancelToken:t})}function x(e,t){return h.a.post(v,e,{cancelToken:t})}function g(e,t){return h.a.get("api/v1/admins/roles/groups",{params:Object(l.a)({},e),cancelToken:t})}function N(e,t,n){return h.a.put("".concat(v,"/").concat(e),t,{cancelToken:n})}!function(e){e.ZEUS="ZEUS",e.HERMES_CORPORATE="HERMES_CORPORATE",e.HERMES_BRAND="HERMES_BRAND",e.HERMES_STORE="HERMES_STORE"}(s||(s={})),function(e){e.CREATE="create",e.READ="read",e.UPDATE="update",e.DELETE="delete"}(c||(c={}));var k=n(34),_=n(84),w=function(e){switch(e){case"role-user-corporate":return s.HERMES_CORPORATE;case"role-user-brand":return s.HERMES_BRAND;case"role-user-store":return s.HERMES_STORE;default:return s.ZEUS}},E=function(e){return e.split("-").join(" ").trim().toLowerCase().replace(/\w\S*/g,(function(e){return e.replace(/^\w/,(function(e){return e.toUpperCase()}))}))},S=n(427),y=n(86),R=n(154),C=n(69),T=n(0),L={name:"",module_permissions:[]},A=b.c().shape({name:b.e().required("Nama Role wajib diisi."),module_permissions:b.a()}),P=function(){var e,t,n=Object(a.useState)([]),s=Object(u.a)(n,2),b=s[0],j=s[1],h=Object(i.i)().section,v=Object(i.g)(),f=Object(R.c)().addPageToasts,p=Object(m.e)({initialValues:L,validationSchema:A,validateOnBlur:!1,validateOnChange:!1,onSubmit:function(e,t){var n=t.setSubmitting;n(!0),setTimeout(Object(d.a)(Object(r.a)().mark((function t(){var s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(s={}).platform=w(h),s.name=e.name,s.status="ACTIVE",s.module_permissions=e.module_permissions,t.next=8,x(s);case 8:n(!1),v.push(y.a.ROLE_LIST.buildPath(h),{message:"Data berhasil disimpan."}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),n(!1),f({scheme:"danger",text:Object(C.a)(t.t0,!0)||"Tambah Role gagal."});case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),1e3)}}),O=Object(a.useState)(),N=Object(u.a)(O,2),P=N[0],D=N[1],M=function(e,t){var n=p.values.module_permissions,s=n.findIndex((function(t){return t.module_id===e}));n[s].permissions.includes(t)?n[s].permissions=n[s].permissions.filter((function(e){return e!==t})):n[s].permissions.push(t),p.setFieldValue("module_permissions",n),D(Date.now())},I=Object(a.useMemo)((function(){try{var e=-1;return b.every((function(t){return t.modules.every((function(t){return e++,p.values.module_permissions[e].permissions.length===t.permissions.length}))}))}catch(t){return!1}}),[b,P]),H=Object(a.useCallback)((function(e){var t=[];b.forEach((function(n){n.modules.forEach((function(n){t.push({module_id:n.id,permissions:e?Object(o.a)(n.permissions):[]})}))})),p.setFieldValue("module_permissions",t),D(Date.now())}),[b]);Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(r.a)().mark((function e(){var t,n,s,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=w(h),e.next=4,g({page:1,limit:999999,platform:s});case 4:c=e.sent,j(null!==(t=null===(n=c.data.data)||void 0===n?void 0:n.items)&&void 0!==t?t:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[h]),Object(a.useEffect)((function(){var e=[];b.map((function(t){t.modules.map((function(t){e.push({module_id:t.id,permissions:[]})}))})),p.setFieldValue("module_permissions",e),D(Date.now())}),[b]);var F=Object(a.useMemo)((function(){return"Tambah Role"}),[]),V=Object(a.useMemo)((function(){return[{isActive:!1,path:"/role-management/".concat(h),title:"List ".concat(E(h))},{isActive:!1,path:"",title:"",isSeparator:!0}]}),[h]);return Object(a.useEffect)((function(){document.title=Object(_.a)(F)}),[]),Object(a.useEffect)((function(){p.status&&setTimeout((function(){return p.setStatus("")}),5e3)}),[p.status]),Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)(S.a,{message:p.status,handleClose:function(){return p.setStatus("")}}),Object(T.jsx)(k.d,{breadcrumbs:V,children:F}),Object(T.jsx)("div",{className:"card-body",children:Object(T.jsxs)("form",{className:"form w-100",onSubmit:p.handleSubmit,noValidate:!0,children:[Object(T.jsx)("div",{className:"mb-10 row",children:Object(T.jsxs)("div",{className:"col-12 col-md-6 mb-10 mb-md-0",children:[Object(T.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Nama Role*"}),Object(T.jsx)("input",Object(l.a)(Object(l.a)({},p.getFieldProps("name")),{},{type:"text",className:"form-control form-control-lg form-control-solid"}))]})}),Object(T.jsx)("div",{className:"mb-10",children:Object(T.jsxs)("label",{className:"form-check form-check-custom form-check-solid w-150px",children:[Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return H(!I)},checked:I}),Object(T.jsx)("span",{className:"form-check-label fw-bold fs-6 min-w-100",children:"Centang semua akses"})]})}),Object(T.jsx)("div",{className:"mb-10",children:Object(T.jsxs)("table",{className:"table gy-4 gs-3",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"fw-bold fs-6 text-gray-800",children:[Object(T.jsx)("th",{children:"Modul"}),Object(T.jsx)("th",{className:"text-center",children:"Read"}),Object(T.jsx)("th",{className:"text-center",children:"Create"}),Object(T.jsx)("th",{className:"text-center",children:"Update"}),Object(T.jsx)("th",{className:"text-center",children:"Delete"})]})}),b.length?b.map((function(e){return Object(T.jsxs)("tbody",{children:[e.modules.length?Object(T.jsx)("tr",{children:Object(T.jsx)("td",{colSpan:5,className:"text-gray-500",children:e.name})}):null,e.modules.map((function(e){var t,n,s,a,i,l,o,r,d,u,m,b,j,h,v,f,O,x,g,N;return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{className:"fw-bold fs-7 text-gray-800",children:e.name}),Object(T.jsx)("td",{className:"text-center",children:e.permissions.includes(c.READ)&&Object(T.jsx)("label",{className:"form-check form-check-custom form-check-solid max-w-100 mx-auto",children:Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return M(e.id,"read")},checked:null!==(t=null===p||void 0===p||null===(n=p.values)||void 0===n||null===(s=n.module_permissions)||void 0===s||null===(a=s.find((function(t){return(null===t||void 0===t?void 0:t.module_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===a||null===(i=a.permissions)||void 0===i?void 0:i.includes("read"))&&void 0!==t&&t})})}),Object(T.jsx)("td",{className:"text-center",children:e.permissions.includes(c.CREATE)&&Object(T.jsx)("label",{className:"form-check form-check-custom form-check-solid max-w-100 mx-auto",children:Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return M(null===e||void 0===e?void 0:e.id,"create")},checked:null!==(l=null===p||void 0===p||null===(o=p.values)||void 0===o||null===(r=o.module_permissions)||void 0===r||null===(d=r.find((function(t){return(null===t||void 0===t?void 0:t.module_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===d||null===(u=d.permissions)||void 0===u?void 0:u.includes("create"))&&void 0!==l&&l})})}),Object(T.jsx)("td",{className:"text-center",children:e.permissions.includes(c.UPDATE)&&Object(T.jsx)("label",{className:"form-check form-check-custom form-check-solid max-w-100 mx-auto",children:Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return M(null===e||void 0===e?void 0:e.id,"update")},checked:null!==(m=null===p||void 0===p||null===(b=p.values)||void 0===b||null===(j=b.module_permissions)||void 0===j||null===(h=j.find((function(t){return(null===t||void 0===t?void 0:t.module_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===h||null===(v=h.permissions)||void 0===v?void 0:v.includes("update"))&&void 0!==m&&m})})}),Object(T.jsx)("td",{className:"text-center",children:e.permissions.includes(c.DELETE)&&Object(T.jsx)("label",{className:"form-check form-check-custom form-check-solid max-w-100 mx-auto",children:Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return M(null===e||void 0===e?void 0:e.id,"delete")},checked:null!==(f=null===p||void 0===p||null===(O=p.values)||void 0===O||null===(x=O.module_permissions)||void 0===x||null===(g=x.find((function(t){return(null===t||void 0===t?void 0:t.module_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===g||null===(N=g.permissions)||void 0===N?void 0:N.includes("delete"))&&void 0!==f&&f})})})]},"module_item_".concat(e.id))}))]},"module_".concat(null===e||void 0===e?void 0:e.id))})):null]})}),Object(T.jsxs)("div",{className:"border-top pt-10 cardfooter-btns",children:[Object(T.jsx)("button",{type:"button",className:"btn btn-lg btn-light fw-bolder me-4",disabled:p.isSubmitting,onClick:function(){return v.push(y.a.ROLE_LIST.buildPath(h))},children:"Kembali"}),Object(T.jsxs)("button",{type:"submit",className:"btn btn-lg btn-secondary fw-bolder me-4",disabled:p.isSubmitting||!(null!==p&&void 0!==p&&null!==(e=p.values)&&void 0!==e&&null!==(t=e.module_permissions)&&void 0!==t&&t.filter((function(e){var t;return null===e||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t.length})).length),children:[Object(T.jsx)("span",{className:"indicator-label",children:"Simpan"}),p.isSubmitting&&Object(T.jsxs)("span",{className:"indicator-progress",children:["Mohon Tunggu...",Object(T.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})})]})},D={name:"",module_permissions:[]},M=b.c().shape({name:b.e().required("Nama Role wajib diisi."),module_permissions:b.a()}),I=function(){var e,t,n=Object(a.useState)(void 0),s=Object(u.a)(n,2),b=s[0],j=s[1],h=Object(a.useState)([]),v=Object(u.a)(h,2),f=v[0],p=v[1],x=Object(i.i)(),S=x.section,L=x.id,A=Object(i.g)(),P=Object(R.c)().addPageToasts,I=Object(m.e)({initialValues:D,validationSchema:M,validateOnBlur:!1,validateOnChange:!1,onSubmit:function(e,t){var n=t.setSubmitting;n(!0),setTimeout(Object(d.a)(Object(r.a)().mark((function t(){var s;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(s={}).platform=w(S),s.name=e.name,s.status="ACTIVE",s.module_permissions=e.module_permissions,t.next=8,N(L,s);case 8:n(!1),A.push(y.a.ROLE_LIST.buildPath(S),{message:"Data berhasil disimpan"}),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),n(!1),P({scheme:"danger",text:Object(C.a)(t.t0,!0)||"Update Role gagal."});case 16:case"end":return t.stop()}}),t,null,[[0,12]])}))),1e3)}}),H=Object(a.useState)(),F=Object(u.a)(H,2),V=F[0],U=F[1],B=function(e,t){var n=I.values.module_permissions,s=n.findIndex((function(t){return t.module_id===e}));n[s].permissions.includes(t)?n[s].permissions=n[s].permissions.filter((function(e){return e!==t})):n[s].permissions.push(t),I.setFieldValue("module_permissions",n),U(Date.now())},K=Object(a.useMemo)((function(){try{var e=-1;return f.every((function(t){return t.modules.every((function(t){return e++,I.values.module_permissions[e].permissions.length===t.permissions.length}))}))}catch(t){return!1}}),[f,V]),G=Object(a.useCallback)((function(e){var t=[];f.forEach((function(n){n.modules.forEach((function(n){t.push({module_id:n.id,permissions:e?Object(o.a)(n.permissions):[]})}))})),I.setFieldValue("module_permissions",t),U(Date.now())}),[f]);Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(r.a)().mark((function e(){var t,n,s,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=w(S),e.next=4,g({page:1,limit:999999,platform:s});case 4:c=e.sent,p(null!==(t=null===(n=c.data.data)||void 0===n?void 0:n.items)&&void 0!==t?t:[]),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[S]),Object(a.useEffect)((function(){var e=function(){var e=Object(d.a)(Object(r.a)().mark((function e(){var t;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(L);case 3:t=e.sent,Array.isArray(t.data.data)?j(t.data.data[0]):j(t.data.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();S&&L&&e()}),[S,L]),Object(a.useEffect)((function(){if(b&&f){b.name&&I.setFieldValue("name",b.name);var e=[];f.map((function(t){t.modules.map((function(t){e.push({module_id:t.id,permissions:[]})}))})),b.module_permissions.map((function(t){t.modules.map((function(t){var n=e.findIndex((function(e){return e.module_id===t.id}));e[n]={module_id:t.id,permissions:t.active_permissions}}))})),I.setFieldValue("module_permissions",e),U(Date.now())}}),[b,f]);var q=Object(a.useMemo)((function(){return"Detail Role"}),[]),z=Object(a.useMemo)((function(){return[{isActive:!1,path:"/role-management/".concat(S),title:"List ".concat(E(S))},{isActive:!1,path:"",title:"",isSeparator:!0}]}),[S]);return Object(a.useEffect)((function(){document.title=Object(_.a)(q)}),[]),Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)(k.d,{breadcrumbs:z,children:q}),Object(T.jsx)("div",{className:"card-body",children:Object(T.jsxs)("form",{className:"form w-100",onSubmit:I.handleSubmit,noValidate:!0,children:[Object(T.jsx)("div",{className:"mb-10 row",children:Object(T.jsxs)("div",{className:"col-12",children:[Object(T.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Nama Role*"}),Object(T.jsx)("input",Object(l.a)(Object(l.a)({},I.getFieldProps("name")),{},{type:"text",className:"form-control form-control-lg form-control-solid"}))]})}),Object(T.jsx)("div",{className:"mb-10",children:Object(T.jsxs)("label",{className:"form-check form-check-custom form-check-solid w-150px",children:[Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return G(!K)},checked:K}),Object(T.jsx)("span",{className:"form-check-label fw-bold fs-6 min-w-100",children:"Centang semua akses"})]})}),Object(T.jsx)("div",{className:"mb-10",children:Object(T.jsxs)("table",{className:"table gy-4 gs-3",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"fw-bold fs-6 text-gray-800",children:[Object(T.jsx)("th",{children:"Modul"}),Object(T.jsx)("th",{className:"text-center",children:"Read"}),Object(T.jsx)("th",{className:"text-center",children:"Create"}),Object(T.jsx)("th",{className:"text-center",children:"Update"}),Object(T.jsx)("th",{className:"text-center",children:"Delete"})]})}),f.length?f.map((function(e){return Object(T.jsxs)("tbody",{children:[e.modules.length?Object(T.jsx)("tr",{children:Object(T.jsx)("td",{colSpan:5,className:"text-gray-500",children:e.name})}):null,e.modules.map((function(e){var t,n,s,a,i,l,o,r,d,u,m,b,j,h,v,f,p,O,x,g;return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{className:"fw-bold fs-7 text-gray-800",children:e.name}),Object(T.jsx)("td",{className:"text-center",children:e.permissions.includes(c.READ)&&Object(T.jsx)("label",{className:"form-check form-check-custom form-check-solid max-w-100 mx-auto",children:Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return B(e.id,"read")},checked:null!==(t=null===I||void 0===I||null===(n=I.values)||void 0===n||null===(s=n.module_permissions)||void 0===s||null===(a=s.find((function(t){return(null===t||void 0===t?void 0:t.module_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===a||null===(i=a.permissions)||void 0===i?void 0:i.includes("read"))&&void 0!==t&&t})})}),Object(T.jsx)("td",{className:"text-center",children:e.permissions.includes(c.CREATE)&&Object(T.jsx)("label",{className:"form-check form-check-custom form-check-solid max-w-100 mx-auto",children:Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return B(null===e||void 0===e?void 0:e.id,"create")},checked:null!==(l=null===I||void 0===I||null===(o=I.values)||void 0===o||null===(r=o.module_permissions)||void 0===r||null===(d=r.find((function(t){return(null===t||void 0===t?void 0:t.module_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===d||null===(u=d.permissions)||void 0===u?void 0:u.includes("create"))&&void 0!==l&&l})})}),Object(T.jsx)("td",{className:"text-center",children:e.permissions.includes(c.UPDATE)&&Object(T.jsx)("label",{className:"form-check form-check-custom form-check-solid max-w-100 mx-auto",children:Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return B(null===e||void 0===e?void 0:e.id,"update")},checked:null!==(m=null===I||void 0===I||null===(b=I.values)||void 0===b||null===(j=b.module_permissions)||void 0===j||null===(h=j.find((function(t){return(null===t||void 0===t?void 0:t.module_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===h||null===(v=h.permissions)||void 0===v?void 0:v.includes("update"))&&void 0!==m&&m})})}),Object(T.jsx)("td",{className:"text-center",children:e.permissions.includes(c.DELETE)&&Object(T.jsx)("label",{className:"form-check form-check-custom form-check-solid max-w-100 mx-auto",children:Object(T.jsx)("input",{className:"form-check-input",type:"checkbox",onChange:function(){return B(null===e||void 0===e?void 0:e.id,"delete")},checked:null!==(f=null===I||void 0===I||null===(p=I.values)||void 0===p||null===(O=p.module_permissions)||void 0===O||null===(x=O.find((function(t){return(null===t||void 0===t?void 0:t.module_id)===(null===e||void 0===e?void 0:e.id)})))||void 0===x||null===(g=x.permissions)||void 0===g?void 0:g.includes("delete"))&&void 0!==f&&f})})})]},"module_item_".concat(e.id))}))]},"module_".concat(null===e||void 0===e?void 0:e.id))})):null]})}),Object(T.jsxs)("div",{className:"border-top pt-10 cardfooter-btns",children:[Object(T.jsx)("button",{type:"button",className:"btn btn-lg btn-light fw-bolder me-4",disabled:I.isSubmitting,onClick:function(){return A.push(y.a.ROLE_LIST.buildPath(S))},children:"Kembali"}),Object(T.jsxs)("button",{type:"submit",className:"btn btn-lg btn-secondary fw-bolder me-4",disabled:I.isSubmitting||!(null!==I&&void 0!==I&&null!==(e=I.values)&&void 0!==e&&null!==(t=e.module_permissions)&&void 0!==t&&t.filter((function(e){var t;return null===e||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t.length})).length),children:[Object(T.jsx)("span",{className:"indicator-label",children:"Simpan"}),I.isSubmitting&&Object(T.jsxs)("span",{className:"indicator-progress",children:["Mohon Tunggu...",Object(T.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})})]})},H=n(45),F=n(28),V=n(18),U=n(431),B=n(39),K=n(178),G=n(425),q=n(417),z=n(3),W=n(428),Z=function(){var e,t,n=Object(a.useState)({search:"",status:"",limit:10,platform:""}),s=Object(u.a)(n,2),c=s[0],o=s[1],m=Object(a.useState)(1),b=Object(u.a)(m,2),j=b[0],f=b[1],O=Object(a.useState)(""),x=Object(u.a)(O,2),g=x[0],N=x[1],S=Object(a.useState)(void 0),y=Object(u.a)(S,2),L=y[0],A=y[1],P=Object(a.useState)(!1),D=Object(u.a)(P,2),M=D[0],I=D[1],q=Object(a.useState)(""),z=Object(u.a)(q,2),Z=z[0],Q=z[1],X=Object(a.useState)(!1),Y=Object(u.a)(X,2),$=Y[0],ee=Y[1],te=Object(B.d)(),ne=Object(i.g)(),se=Object(R.c)().addPageToasts,ce=Object(i.i)().section,ae=Object(B.e)((function(e){return e.roles}),B.c),ie=ae.data,le=ae.isLoading,oe=Object(U.a)(c,500),re=Object(a.useMemo)((function(){return function(e){switch(e){case"role-user-corporate":return"user_role_user_corporate";case"role-user-brand":return"user_role_user_brand";case"role-user-store":return"user_role_user_store";default:return"user_role_admin"}}(ce)}),[ce]),de=Object(W.a)({code:re}).hasAccess,ue=function(){te(K.a.actions.getListRole(void 0)),te(K.a.actions.setIsLoading(!0)),setTimeout(Object(d.a)(Object(r.a)().mark((function e(){var t,n,s,a,i,l,o;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={page:j},n=c.limit,s=c.search,a=c.status,(i=c.platform)&&(t.platform=i),n&&(t.limit=n),s&&(t.search=s),a&&(t.status=a),e.next=9,p(t);case 9:l=e.sent,o=l.data.data,te(K.a.actions.getListRole(o)),N(""),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),N("Error, try to refresh the page"),te(K.a.actions.getListRole(void 0));case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),1e3)};Object(a.useEffect)((function(){ce&&o((function(e){return Object(l.a)(Object(l.a)({},e),{},{platform:w(ce)})}))}),[ce]);var me=Object(a.useMemo)((function(){return E(ce)}),[ce]),be=Object(a.useMemo)((function(){return"List ".concat(me)}),[me]);return Object(a.useEffect)((function(){document.title=Object(_.a)(be)}),[be]),Object(a.useEffect)((function(){f(1)}),[oe]),Object(a.useEffect)((function(){c.platform&&ue()}),[oe,j]),Object(a.useEffect)((function(){var e=ne.location.state;null!==e&&void 0!==e&&e.message&&(se({scheme:"info",text:null===e||void 0===e?void 0:e.message}),setTimeout((function(){ne.replace({state:{}})}),5e3))}),[ne.location.state]),Object(T.jsxs)("div",{className:"position-relative",children:[Object(T.jsx)(k.d,{description:be,children:me}),Object(T.jsx)(J,{show:$,handleClose:function(){ee(!1),Q("")},handleProcess:function(){null!==L&&void 0!==L&&L.id&&(I(!0),setTimeout((function(){var e,t;(e=null===L||void 0===L?void 0:L.id,h.a.delete("".concat(v,"/").concat(e),{cancelToken:t})).then((function(){ue(),se({scheme:"info",text:"Role berhasil dihapus"}),I(!1),A(void 0),ee(!1)})).catch((function(e){var t=Object(C.a)(e,!0)||"Role gagal dihapus";ee(!0),Q(t),I(!1)}))}),1e3))},item:L,loading:M,isFailed:Z,section:E(ce)}),Object(T.jsxs)("div",{className:"card",children:[Object(T.jsxs)("div",{className:"card-header d-flex align-items-center justify-conten-between",children:[Object(T.jsxs)("h1",{children:["List ",E(ce)]}),Object(T.jsx)("div",{className:"card-toolbar",children:de({access:"create"})?Object(T.jsx)("button",{onClick:function(){return ne.push("/role-management/".concat(ce,"/register"))},type:"button",className:"btn btn-sm btn-secondary fw-bold fs-6",children:"Tambah Role"}):null})]}),Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"d-flex flex-column flex-lg-row",children:Object(T.jsxs)("div",{className:"mb-4 w-lg-200px w-100 position-relative",children:[Object(T.jsx)(F.a,{src:"/media/icons/efood/IconSearch.svg",className:"position-absolute translate-middle-y top-50 ms-4 pe-none"}),Object(T.jsx)("input",{placeholder:"Cari",className:"form-control form-control-lg form-control-solid ps-13",type:"text",autoComplete:"off",onChange:function(e){var t=e.target,n=t.name,s=t.value;o((function(e){return Object(l.a)(Object(l.a)({},e),{},Object(H.a)({},n,s))}))},name:"search"})]})}),Object(T.jsxs)("div",{className:"overflow-auto position-relative mb-5",children:[le&&Object(T.jsx)("div",{className:"overlay-light"}),Object(T.jsxs)("table",{className:"table table-striped gy-7 gs-7 mt-10",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"fw-bold fs-6 text-gray-600 border-bottom border-gray-200",children:[Object(T.jsx)("th",{children:"No."}),Object(T.jsx)("th",{style:{minWidth:100},children:"Action"}),Object(T.jsx)("th",{className:"min-w-100",children:"Nama Role"}),Object(T.jsx)("th",{children:"Akses"})]})}),ce?Object(T.jsx)("tbody",{children:null!==ie&&void 0!==ie&&null!==(e=ie.items)&&void 0!==e&&e.length?null===ie||void 0===ie||null===(t=ie.items)||void 0===t?void 0:t.map((function(e,t){var n,s;return Object(T.jsxs)("tr",{className:"fw-bold fs-6",children:[Object(T.jsx)("td",{className:"pt-9",children:(j-1)*((null===c||void 0===c?void 0:c.limit)||10)+t+1}),Object(T.jsx)("td",{children:Object(T.jsxs)("div",{className:"d-flex",children:[de({access:"update"})?Object(T.jsx)(V.b,{to:"/role-management/".concat(ce,"/detail/").concat(e.id),children:Object(T.jsx)(F.a,{src:"/media/icons/efood/IconEdit.svg"})}):null,!de({access:"delete"})||null!==e&&void 0!==e&&null!==(n=e.special_role)&&void 0!==n&&n.name?null:Object(T.jsx)("button",{className:"btn btn-transparent p-0 ms-5",onClick:function(){ee(!0),A(e)},children:Object(T.jsx)(F.a,{src:"/media/icons/efood/IconDelete.svg"})})]})}),Object(T.jsx)("td",{className:"pt-9",children:null===e||void 0===e?void 0:e.name}),Object(T.jsx)("td",{children:null===e||void 0===e||null===(s=e.module_permissions)||void 0===s?void 0:s.map((function(e){var t;return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{className:"pt-2",children:null===e||void 0===e?void 0:e.name}),null===e||void 0===e||null===(t=e.modules)||void 0===t?void 0:t.map((function(e){var t;return Object(T.jsxs)("div",{className:"d-flex align-items-center",children:[Object(T.jsx)("div",{className:"w-200px fw-normal",children:Object(T.jsx)("span",{className:"min-w-100",children:null===e||void 0===e?void 0:e.name})}),Object(T.jsx)("div",{className:"ps-5 fw-normal",children:Object(T.jsxs)("span",{className:"min-w-100",children:[": ",null===e||void 0===e||null===(t=e.active_permissions)||void 0===t?void 0:t.join(", ")]})})]},"module_".concat(null===e||void 0===e?void 0:e.name))}))]},"permission_".concat(null===e||void 0===e?void 0:e.id))}))})]},"".concat(e.name,"_").concat(t))})):Object(T.jsx)("tr",{children:Object(T.jsx)("td",{colSpan:7,className:"text-center fw-bold fs-6 bg-light",children:le?"Loading":g||"Data Kosong"})})}):null]})]}),Object(T.jsx)(G.a,{loading:le,page:j,limit:Number(c.limit||10),setPage:f,setPerPage:function(e){return o(Object(l.a)(Object(l.a)({},c),{},{limit:e}))},maxData:(null===ie||void 0===ie?void 0:ie.total_item)||0})]})]})]})},J=function(e){var t,n=e.show,s=e.handleClose,c=e.handleProcess,a=e.loading,i=e.item,l=e.isFailed,o=e.section;return Object(T.jsxs)(q.a,{id:"kt_modal_create_app",tabIndex:-1,"aria-hidden":"true",dialogClassName:"modal-dialog-centered mw-500px h-auto",show:n,onHide:s,centered:!0,children:[Object(T.jsxs)("div",{className:"modal-header pt-8 pb-5 px-10 d-flex justify-content-between border-bottom-1",children:[l?Object(T.jsx)("h1",{children:"Gagal Menghapus Role"}):Object(T.jsx)("h1",{children:"Hapus Role"}),Object(T.jsx)("div",{className:"btn btn-icon btn-sm btn-transparent",onClick:s,children:Object(T.jsx)(z.a,{className:"svg-icon-2",path:"/media/icons/duotune/arrows/arr061.svg"})})]}),Object(T.jsx)("div",{className:"modal-body px-10 py-10",children:l?null!==l&&void 0!==l&&null!==(t=l.toLowerCase())&&void 0!==t&&t.includes("tidak ditemukan")?Object(T.jsx)("span",{children:l}):Object(T.jsxs)("span",{children:["Gagal menghapus role karena masih ada ",o," dengan role"," ",Object(T.jsx)("span",{className:"fw-bolder fs-6",children:null===i||void 0===i?void 0:i.name}),". Ubah data User atau Hapus User terlebih dahulu sebelum menghapus role."]}):Object(T.jsxs)("span",{children:["Apakah Anda yakin ingin menghapus role"," ",Object(T.jsx)("span",{className:"fw-bolder fs-6",children:null===i||void 0===i?void 0:i.name}),"?"]})}),Object(T.jsx)("div",{className:"modal-footer",children:Object(T.jsxs)("div",{className:"d-flex pb-lg-0",children:[!l&&Object(T.jsxs)("button",{type:"submit",id:"kt_password_reset_submit",className:"btn btn-lg btn-light fw-bolder d-block me-4",onClick:c,disabled:a,children:[Object(T.jsx)("span",{className:"indicator-label text-secondary",children:"Hapus"}),a&&Object(T.jsxs)("span",{className:"indicator-progress",children:["Mohon Tunggu...",Object(T.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]}),Object(T.jsx)("button",{type:"button",id:"kt_login_password_reset_form_cancel_button",className:"btn btn-lg btn-secondary fw-bolder",onClick:s,children:"Kembali"})]})})]})},Q=function(){var e=Object(a.useState)(""),t=Object(u.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(""),o=Object(u.a)(c,2),m=o[0],b=o[1],j=Object(B.d)(),v=Object(i.g)(),p=Object(R.c)().addPageToasts,O=Object(B.e)((function(e){return e.roles}),B.c),x=O.data,g=O.isLoading,N=Object(U.a)(n,500),w=Object(W.a)({code:"user_role_special_role"}).hasAccess;return Object(a.useEffect)((function(){j(K.a.actions.getListRole(void 0)),j(K.a.actions.setIsLoading(!0)),setTimeout(Object(d.a)(Object(r.a)().mark((function e(){var t,s,c;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={page:1,limit:999999},n&&(t.search=n),e.next=5,a=t,i=void 0,h.a.get(f,{params:Object(l.a)({},a),cancelToken:i});case 5:s=e.sent,c=s.data.data,j(K.a.actions.getListRole(c)),b(""),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),b("Error, try to refresh the page"),j(K.a.actions.getListRole(void 0));case 15:case"end":return e.stop()}var a,i}),e,null,[[0,11]])}))),1e3)}),[N]),Object(a.useEffect)((function(){document.title=Object(_.a)("List Special Roles")}),[]),Object(a.useEffect)((function(){var e=v.location.state;null!==e&&void 0!==e&&e.message&&(p({scheme:"info",text:null===e||void 0===e?void 0:e.message}),setTimeout((function(){v.replace({state:{}})}),5e3))}),[v.location.state]),Object(a.useEffect)((function(){w({access:"read"})||v.push("/dashboard")}),[w({access:"read"})]),Object(T.jsxs)("div",{className:"position-relative",children:[Object(T.jsx)(k.d,{description:"List Special Roles",children:"Special Roles"}),Object(T.jsxs)("div",{className:"card",children:[Object(T.jsx)("div",{className:"card-header d-flex align-items-center justify-conten-between",children:Object(T.jsx)("h1",{children:"List Special Roles"})}),Object(T.jsxs)("div",{className:"card-body",children:[Object(T.jsx)("div",{className:"d-flex flex-column flex-lg-row",children:Object(T.jsxs)("div",{className:"mb-4 w-lg-200px w-100 position-relative",children:[Object(T.jsx)(F.a,{src:"/media/icons/efood/IconSearch.svg",className:"position-absolute translate-middle-y top-50 ms-4 pe-none"}),Object(T.jsx)("input",{placeholder:"Cari",className:"form-control form-control-lg form-control-solid ps-13",type:"text",autoComplete:"off",onChange:function(e){var t=e.target.value;s(t)},name:"search"})]})}),Object(T.jsxs)("div",{className:"overflow-auto position-relative mb-5",children:[g&&Object(T.jsx)("div",{className:"overlay-light"}),Object(T.jsxs)("table",{className:"table table-striped gy-5 gs-7 mt-5",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{className:"fw-bold fs-6 text-gray-600 border-bottom border-gray-200",children:[Object(T.jsx)("th",{children:"No."}),Object(T.jsx)("th",{style:{minWidth:100},children:"Action"}),Object(T.jsx)("th",{className:"min-w-100",children:"Nama Special Role"}),Object(T.jsx)("th",{children:"Role"})]})}),Object(T.jsx)("tbody",{children:null!==x&&void 0!==x&&x.length?null===x||void 0===x?void 0:x.map((function(e,t){var n;return Object(T.jsxs)("tr",{className:"fw-bold fs-6 align-middle",children:[Object(T.jsx)("td",{children:t+1}),Object(T.jsx)("td",{children:Object(T.jsx)("div",{className:"d-flex",children:w({access:"update"})?Object(T.jsx)(V.b,{to:y.a.DETAIL_SPECIAL_ROLES.buildPath(null===e||void 0===e?void 0:e.id),children:Object(T.jsx)(F.a,{src:"/media/icons/efood/IconEdit.svg"})}):null})}),Object(T.jsx)("td",{children:null===e||void 0===e?void 0:e.name}),Object(T.jsx)("td",{children:null===e||void 0===e||null===(n=e.role)||void 0===n?void 0:n.name})]},"".concat(e.name,"_").concat(t))})):Object(T.jsx)("tr",{children:Object(T.jsx)("td",{colSpan:7,className:"text-center fw-bold fs-6 bg-light",children:g?"Loading":m||"Data Kosong"})})})]})]})]})]})]})},X=n(422),Y=n(421),$={name:"",role:void 0},ee=b.c().shape({name:b.e(),role:b.c().shape({value:b.e(),label:b.e()}).required("Role wajib diisi")}),te=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)([]),o=Object(u.a)(c,2),r=o[0],d=o[1],b=Object(i.g)(),j=Object(i.i)().id,v=Object(R.c)().addPageToasts,O=Object(W.a)({code:"user_role_special_role",access:"update"}).canAccessPage,x=Object(m.e)({initialValues:$,validateOnBlur:!1,validateOnChange:!1,validationSchema:ee,onSubmit:function(e,t){t.setStatus;var n=t.setSubmitting;s(!0),n(!0),function(e,t,n){return h.a.put("".concat(f,"/").concat(e),t,{cancelToken:n})}(j,{role_id:e.role.value}).then((function(){b.push(y.a.SPECIAL_ROLES.PATH,{message:"Data berhasil disimpan."}),n(!1)})).catch((function(e){v({scheme:"danger",text:"Data gagal disimpan."}),s(!1),n(!1)}))}});return Object(a.useEffect)((function(){s(!0),function(e,t){return h.a.get("".concat(f,"/").concat(e),{cancelToken:t})}(j).then((function(e){var t,n,c=e.data.data;null!==c&&void 0!==c&&c.name&&x.setFieldValue("name",null===c||void 0===c?void 0:c.name),null!==c&&void 0!==c&&c.role&&x.setFieldValue("role",{value:null===c||void 0===c||null===(t=c.role)||void 0===t?void 0:t.id,label:null===c||void 0===c||null===(n=c.role)||void 0===n?void 0:n.name}),s(!1)})).catch((function(e){v({scheme:"danger",text:Object(C.a)(e)||"Gagal mendapatkan detail special role."}),s(!1)}))}),[j]),Object(a.useEffect)((function(){document.title=Object(_.a)("Detail Special Role"),p({page:1,limit:999999}).then((function(e){var t,n,s=null===(t=e.data.data)||void 0===t||null===(n=t.items)||void 0===n?void 0:n.map((function(e){return{value:null===e||void 0===e?void 0:e.id,label:null===e||void 0===e?void 0:e.name}}));d(s)})).catch((function(e){}))}),[]),Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(k.d,{description:"Detail Special Role",breadcrumbs:[{isActive:!1,title:"List Special Roles",path:y.a.SPECIAL_ROLES.PATH},{isSeparator:!0,isActive:!1,title:"",path:""}],children:"Detail Special Role"}),Object(T.jsx)("div",{className:"card",children:Object(T.jsx)("div",{className:"card-body",children:Object(T.jsxs)("form",{noValidate:!0,onSubmit:x.handleSubmit,children:[Object(T.jsxs)("div",{className:"row",children:[Object(T.jsxs)("div",{className:"col-12 col-md-6 mb-10",children:[Object(T.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Nama Special Role"}),Object(T.jsx)("input",Object(l.a)(Object(l.a)({placeholder:""},x.getFieldProps("name")),{},{className:"form-control form-control-lg form-control-solid",type:"text",onChange:function(e){var t=e.target;return x.setFieldValue("name",t.value)},disabled:!0,maxLength:150}))]}),Object(T.jsxs)("div",{className:"col-12 col-md-6 mb-10",children:[Object(T.jsx)("label",{className:"flex-fill form-label fs-6 fw-bolder text-gray-800",children:"Role*"}),Object(T.jsx)(X.a,{placeholder:"Pilih Role",cacheOptions:!0,defaultOptions:!0,components:Y.a,options:r,value:x.values.role,onChange:function(e){return x.setFieldValue("role",e)}},"brand-".concat(x.values.deeplink_type))]})]}),Object(T.jsxs)("div",{className:"border-top pt-10 cardfooter-btns",children:[Object(T.jsx)(V.b,{type:"button",className:"btn btn-lg btn-light fw-bolder me-4",to:y.a.SPECIAL_ROLES.PATH,children:"Kembali"}),O&&Object(T.jsxs)("button",{type:"submit",className:"btn btn-lg btn-secondary fw-bolder",disabled:n||x.isSubmitting,children:[Object(T.jsx)("span",{className:"indicator-label",children:"Simpan"}),x.isSubmitting&&Object(T.jsxs)("span",{className:"indicator-progress",children:["Mohon Tunggu...",Object(T.jsx)("span",{className:"spinner-border spinner-border-sm align-middle ms-2"})]})]})]})]})})})]})};t.default=function(){return Object(T.jsxs)(i.d,{children:[Object(T.jsx)(i.b,{path:y.a.DETAIL_SPECIAL_ROLES.PATH,component:te,exact:!0}),Object(T.jsx)(i.b,{path:y.a.SPECIAL_ROLES.PATH,component:Q,exact:!0}),Object(T.jsx)(i.b,{path:y.a.ROLE_LIST.PATH,component:Z,exact:!0}),Object(T.jsx)(i.b,{path:y.a.ROLE_DETAIL.PATH,component:I,exact:!0}),Object(T.jsx)(i.b,{path:y.a.ROLE_REGISTER.PATH,component:P,exact:!0})]})}}}]);
//# sourceMappingURL=8.348ae6d3.chunk.js.map